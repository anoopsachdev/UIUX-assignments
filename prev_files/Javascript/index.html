<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Philosophy DOM Playground</title>
  <!-- Tailwind CDN for quick styling (works offline if you have no internet but best with internet) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Small custom styles to tweak a few things -->
  <style>
    /* Make the main card slightly elevated and centered */
    body { background: linear-gradient(180deg,#0f172a 0%, #071123 100%); }
    .glass { background: rgba(255,255,255,0.03); backdrop-filter: blur(6px); }
    /* subtle monospace for code-ish bits */
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, monospace; }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6 text-slate-100">
  <!-- Main playground container -->
  <main class="w-full max-w-4xl glass rounded-2xl shadow-2xl p-6">
    <header class="flex items-center justify-between mb-4">
      <div>
        <h1 class="text-3xl font-semibold">Philosophy — DOM Playground</h1>
        <p class="text-sm text-slate-300">Interact with quotes, filters, counters and try DOM exercises below.</p>
      </div>
      <div class="flex gap-2 items-center">
        <!-- Theme toggle: example of event listener target -->
        <button id="themeToggle" class="px-3 py-1 rounded-md border border-slate-600 text-sm">Toggle Accent</button>
      </div>
    </header>

    <!-- Controls row: add, filter, sort -->
    <section class="grid grid-cols-1 md:grid-cols-3 gap-3 mb-6">
      <!-- Add a new quote (exercise: use createElement + appendChild) -->
      <div class="p-3 rounded-lg border border-slate-700">
        <h3 class="font-medium">Add Quote</h3>
        <input id="authorInput" placeholder="Author" class="w-full mt-2 p-2 rounded bg-transparent border border-slate-700" />
        <textarea id="quoteInput" placeholder="Quote text" class="w-full mt-2 p-2 rounded bg-transparent border border-slate-700"></textarea>
        <div class="flex gap-2 mt-2">
          <button id="addBtn" class="px-3 py-1 rounded bg-emerald-600 text-black">Add</button>
          <button id="clearBtn" class="px-3 py-1 rounded border">Clear</button>
        </div>
      </div>

      <!-- Filter and search (exercise: event + filtering DOM nodes) -->
      <div class="p-3 rounded-lg border border-slate-700">
        <h3 class="font-medium">Filter / Search</h3>
        <input id="search" placeholder="Search text or author" class="w-full mt-2 p-2 rounded bg-transparent border border-slate-700" />
        <div class="mt-2 flex gap-2">
          <button id="showAll" class="px-3 py-1 rounded border">Show All</button>
          <button id="toggleFav" class="px-3 py-1 rounded">Toggle Favorites</button>
        </div>
      </div>

      <!-- Summary panel: counts (exercise: manipulate textContent) -->
      <div class="p-3 rounded-lg border border-slate-700">
        <h3 class="font-medium">Summary</h3>
        <p class="mt-2">Total quotes: <span id="totalCount" class="font-semibold">0</span></p>
        <p>Favorites: <span id="favCount" class="font-semibold">0</span></p>
        <p class="mt-2">Try clicking a quote card to toggle highlight.</p>
      </div>
    </section>

    <!-- Quotes list: event delegation practice -->
    <section>
      <h2 class="text-xl mb-3">Quotes</h2>
      <div id="quotesContainer" class="grid gap-3">
        <!-- cards inserted by JS -->
      </div>
    </section>

    <!-- A hidden template for a quote card (use cloneNode in JS) -->
    <template id="quoteTemplate">
      <article class="quote-card p-4 rounded-lg border border-slate-700 flex justify-between items-start">
        <div>
          <h3 class="author font-semibold"></h3>
          <p class="quote mt-1 text-slate-200"></p>
        </div>
        <div class="flex flex-col items-end gap-2">
          <div class="buttons flex flex-col gap-1">
            <button class="favBtn px-2 py-1 rounded text-sm">♡</button>
            <button class="editBtn px-2 py-1 rounded text-sm border">Edit</button>
            <button class="delBtn px-2 py-1 rounded text-sm border">Delete</button>
          </div>
          <small class="mono text-xs text-slate-400 timestamp"></small>
        </div>
      </article>
    </template>

    <!-- Footer: quick exercises hints -->
    <footer class="mt-6 text-slate-400">
      <p class="text-sm">Exercises: 1) Add a quote (use createElement), 2) Filter live as you type, 3) Use event delegation on #quotesContainer, 4) Implement edit in-place, 5) Persist to localStorage (advanced).</p>
    </footer>
  </main>

  <!-- Script: beginner-friendly, heavily commented to teach DOM basics -->
  <script>
    /*
      Philosophy DOM Playground
      - heavily commented so you can learn and tinker.
      - key DOM APIs used: querySelector, createElement, addEventListener, cloneNode, textContent, localStorage (suggested)
    */

    // --- Grab important DOM nodes once ---
    const quotesContainer = document.getElementById('quotesContainer');
    const quoteTemplate = document.getElementById('quoteTemplate');
    const addBtn = document.getElementById('addBtn');
    const clearBtn = document.getElementById('clearBtn');
    const authorInput = document.getElementById('authorInput');
    const quoteInput = document.getElementById('quoteInput');
    const totalCount = document.getElementById('totalCount');
    const favCount = document.getElementById('favCount');
    const search = document.getElementById('search');
    const themeToggle = document.getElementById('themeToggle');
    const showAll = document.getElementById('showAll');
    const toggleFav = document.getElementById('toggleFav');

    // A small in-memory dataset to start with (you can expand)
    const initialQuotes = [
      { author: 'Lao Tzu', text: 'The journey of a thousand miles begins with one step.' , fav:false},
      { author: 'Socrates', text: 'The unexamined life is not worth living.' , fav:false},
      { author: 'Rumi', text: 'What you seek is seeking you.' , fav:false},
    ];

    // Store current quotes in an array so we can render, filter, and count easily.
    let quotes = [...initialQuotes];

    // --- Utility: render all quotes from the `quotes` array ---
    function renderQuotes(list = quotes) {
      // Clear container first
      quotesContainer.innerHTML = '';

      // For each quote, clone the template and populate
      list.forEach((q, idx) => {
        const node = quoteTemplate.content.cloneNode(true);
        const card = node.querySelector('.quote-card');
        card.dataset.index = idx; // helpful for event delegation

        node.querySelector('.author').textContent = q.author;
        node.querySelector('.quote').textContent = q.text;
        node.querySelector('.timestamp').textContent = new Date().toLocaleString();

        // mark favorite visually
        if (q.fav) {
          node.querySelector('.favBtn').textContent = '♥';
          card.classList.add('ring-2','ring-amber-500');
        }

        quotesContainer.appendChild(node);
      });

      // update summary
      totalCount.textContent = quotes.length;
      favCount.textContent = quotes.filter(q => q.fav).length;
    }

    // initial render
    renderQuotes();

    // --- Add a new quote (createElement/appendChild flow) ---
    addBtn.addEventListener('click', function() {
      const author = authorInput.value.trim() || 'Anonymous';
      const text = quoteInput.value.trim();
      if (!text) return alert('Please enter a quote text first');

      // add to our data array
      quotes.unshift({ author, text, fav: false });

      // re-render
      renderQuotes();

      // clear inputs for next time
      authorInput.value = '';
      quoteInput.value = '';

      // focus back to quote input so you can add many fast
      quoteInput.focus();
    });

    // Clear inputs
    clearBtn.addEventListener('click', () => {
      authorInput.value = '';
      quoteInput.value = '';
    });

    // --- Event delegation: handle clicks on card buttons ---
    // Instead of attaching listeners to every button, we attach one to the container.
    quotesContainer.addEventListener('click', function(e) {
      const btn = e.target.closest('button');
      if (!btn) return; // clicked outside buttons

      const card = btn.closest('.quote-card');
      const index = Number(card.dataset.index);

      if (btn.classList.contains('favBtn')) {
        // toggle favorite
        quotes[index].fav = !quotes[index].fav;
        renderQuotes(); // simple approach: re-render
      } else if (btn.classList.contains('delBtn')) {
        // delete
        if (confirm('Delete this quote?')) {
          quotes.splice(index, 1);
          renderQuotes();
        }
      } else if (btn.classList.contains('editBtn')) {
        // edit in place: convert quote text into an input
        const quoteP = card.querySelector('.quote');
        const old = quotes[index].text;
        const input = document.createElement('textarea');
        input.value = old;
        input.className = 'w-full p-1 rounded bg-transparent border border-slate-600 text-black';
        quoteP.replaceWith(input);

        // change edit button to save
        btn.textContent = 'Save';
        btn.classList.add('bg-emerald-500','text-black');

        // handle save click (using one-time listener)
        const saveHandler = function() {
          const newText = input.value.trim() || old;
          quotes[index].text = newText;
          renderQuotes();
        };

        // replace the click handler on this edit button
        btn.addEventListener('click', saveHandler, { once: true });
      }
    });

    // --- Live search/filter ---
    search.addEventListener('input', function(e) {
      const q = e.target.value.toLowerCase();
      if (!q) return renderQuotes();

      // Filter quotes whose author or text includes the query
      const filtered = quotes.filter(item => item.author.toLowerCase().includes(q) || item.text.toLowerCase().includes(q));
      renderQuotes(filtered);
    });

    showAll.addEventListener('click', () => renderQuotes());

    // Toggle showing only favorites (quick example)
    let showingFav = false;
    toggleFav.addEventListener('click', () => {
      showingFav = !showingFav;
      if (showingFav) {
        renderQuotes(quotes.filter(q => q.fav));
      } else {
        renderQuotes();
      }
    });

    // --- Simple theme toggle that changes accent ring color ---
    let accent = 0;
    themeToggle.addEventListener('click', () => {
      accent = (accent + 1) % 3;
      document.documentElement.style.setProperty('--accent', accent);

      // playful accents: we change border colors of cards via Tailwind classes toggled on body
      document.body.classList.toggle('accent-1', accent === 1);
      document.body.classList.toggle('accent-2', accent === 2);
    });

    // --- Helpful tip: how to persist to localStorage (commented out) ---
    // window.addEventListener('beforeunload', () => {
    //   // save current quotes array as JSON
    //   localStorage.setItem('philosophyQuotes', JSON.stringify(quotes));
    // });
    // // To load: const saved = JSON.parse(localStorage.getItem('philosophyQuotes') || 'null'); if (saved) { quotes = saved; renderQuotes(); }

    // --- Extra tiny exercise for you: add keyboard shortcut 'n' to focus new quote input ---
    document.addEventListener('keydown', (e) => {
      // press 'n' (not when typing in an input) to jump to quoteInput
      if (e.key === 'n' && document.activeElement.tagName !== 'INPUT' && document.activeElement.tagName !== 'TEXTAREA') {
        quoteInput.focus();
      }
    });

    // End of script
  </script>
</body>
</html>
